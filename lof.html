<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    sid = Math.round(Math.random()*1000000000)
    if (localStorage.getItem('sid')) {
        sid = localStorage.getItem('sid')
    } else {
        localStorage.setItem('sid', sid)
    }
    xhttp = new XMLHttpRequest()
    xhttp.onload = () => {
        v = JSON.parse(xhttp.responseText)
        console.log(v);
        if (v[1]) {
            document.getElementById("content").innerHTML = `
            <div class="lcont">
            <div class="lc">Bejelentkezve: <i>` + v[1].v_name + " " + v[1].k_name + `</i></div>
            <div class="lc"><button onclick="lo()">Kijelentkezés</button></div>
            </div>
            <div class="la">` + v[1].vhtml + `</div>`
        } else {
            document.getElementById("content").innerHTML = `
                <h2 class="c">Bejelentkezés</h2>
                <form>
                <div class="lof">
                    <div class="la">
                    <input autocomplete="username" placeholder="gmail cím" type="text" id="un">@gmail.com
                    </div>
                    <div class="la">
                    <input placeholder="jelszó" autocomplete="current-password" type="password" id="pw">
                    </div>
                    <div class="lb">
                    <button onclick="f()">Bejelentkezés</button>
                    </div>
                </div>
                </form>
            `
        }
    }
    function lo() {
        xhttp.open("POST", "https://inf.u-szeged.hu/~tnemeth/login.php")
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
        sid = Math.round(Math.random()*1000000000)
        localStorage.setItem('sid', sid)
        console.log(sid);
        xhttp.send(`sid=${sid}`)
    }
    function f() {
        xhttp.open("POST", "https://inf.u-szeged.hu/~tnemeth/login.php")
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
        if (document.getElementById('un')) {
            ss = [
                `sid=${sid}`,
                `ln=${document.getElementById('un').value}`,
                `pw=${CryptoJS.
                        SHA512(
                            document.getElementById('pw').value
                        ).words.join('')}`
            ].join("&")
            xhttp.send(ss)
        } else xhttp.send(`sid=${sid}`)
    }
    f()
</script>
<link rel="stylesheet" href="main.css">
<ul class="navigation">
    <li><a href="./">Kezdőlap</a></li>
    <li><a href="tanttm.html">Tananyag</a></li>
    <li><a href="htmlexampl.html">HTML-CSS</a></li>
    <li><a href="pyexamples.html">Python</a></li>
    <li><a href="probadogalista.html">Ellenőrzés</a></li>
</ul>
<h1 class="h c">Intranet «es6.eu»</h1>
<div id="content"></div>
<style>
.lof {
    text-align: center;
    width: 300px;
    margin: auto;
}
.la {
    display: block;
    text-align: left;
    margin: 6px auto;
    padding: 7px;
    background-color: rgb(214, 214, 180);
    box-shadow: 1px 1px 3px inset black;
    color: rgb(14, 52, 14);
}
.lb {
    text-align: right;
    padding: 7px;
    margin: 6px;
    background-color: rgb(175, 222, 222);
    box-shadow: 1px 1px 3px inset black;
}
.lc {
    display: inline-block;
    text-shadow: 1px 1px 3px black;
}
.lcont {
    display: flex;
    justify-content: space-between;
}
div.sa {
    background-color: bisque;
    box-shadow: 1px 1px 3px inset gray;
    margin: 6px;
    padding: 10px;
}
</style>