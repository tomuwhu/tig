<!doctype html>
<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/brython@3/brython.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/brython@3/brython_stdlib.js"></script>
        <script type="text/python">
            from browser import document, html, timer
            a = [[]]*3
            q = []
            time = 1
            ot = 0
            def op():
                global ot, ft, n
                document["anim"].clear()
                document["anim"] <= q[ot]
                ot += 1
                if ot >= 2 ** n:
                  timer.clear_interval(ft)
            def kiir():
                global time
                q.append( html.DIV(
                  html.DIV(f'{time}.', Class="t") +
                  html.DIV(map(lambda x: html.DIV(x, Class=f'f{x}'), a[0]), Class="el") +
                  html.DIV(map(lambda x: html.DIV(x, Class=f'f{x}'), a[1]), Class="el") +
                  html.DIV(map(lambda x: html.DIV(x, Class=f'f{x}'), a[2]), Class="el"),
                  Class="c"
                ) )
                time += 1
            def f(i, j):
                global a, time
                e = a[i-1][-1]
                a[i-1].pop()
                a[j-1].append(e)
                kiir()
            def h(n, a, b):
                if n > 1: h(n - 1, a, 6 - a - b)
                f(a, b)
                if n > 1: h(n - 1, 6 - a - b, b)
            n = 5
            a[0] = list(range(n,0,-1))
            a[1] = []
            a[2] = []
            kiir()
            h(n,1,2)
            ft = timer.set_interval(op, 1500)
        </script>
        <style>
            h1 {
              text-shadow: 1px 1px 4px black;
              font-size: 30px;
              color: rgb(88, 38, 58);
            }
            .c {
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                height: 220px;
                margin: 6px auto;
                width: 450px;
            }
            .t {
                margin: 6px;
                padding: 10px;
                font-weight: bold;
                text-shadow: 1px 1px 4px black;
                width: 35px;
                font-size: 30px;
                box-shadow: 1px 1px 3px inset black;
                border-radius: 7px;
                background-color: rgb(11, 112, 90);
                color: rgb(210, 210, 166);
            }
            .el {
                width: 76px;
                margin: 6px;
                padding: 15px;
                box-shadow: 1px 1px 3px inset black;
                border-radius: 7px;
                background-color: aqua;
                text-align: center;
                align-items: center;
                display: flex;
                flex-direction: column-reverse;
            }
            .el div {
                box-shadow: 1px 1px 3px black;
                background-color: rgb(23, 98, 101);
                padding: 4px;
                margin:3px;
                border-radius: 20px;
                color: rgb(183, 209, 226);
                text-shadow: 1px 1px 3px black;
            }
            .f1 {
                width: 30px;
            }
            .f2 {
                width: 40px;
            }
            .f3 {
                width: 50px;
            }
            .f4 {
                width: 60px;
            }
            .f5 {
                width: 70px;
            }
            body {
              background-color:rgb(199, 241, 235);
              color: rgb(47, 91, 91);
              text-align:center;
            }
        </style>
    </head>
    <body onload="brython()">
      <h1>Hanoi tornyai</h1>
      <div id="anim"></div>
    </body>
</html>
